{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "assignees": ["SamNewhouse"],
  "addLabels": ["dependency"],
  "rebaseWhen": "behind-base-branch",
  "packageRules": [
    {
      "description": "Root package.json dependency updates",
      "matchFileNames": ["package.json"],
      "matchDepTypes": ["devDependencies"],
      "commitMessagePrefix": "[DEPENDENCY]",
      "automerge": false,
      "separateMultipleMajor": true
    },
    {
      "description": "Group matching dependencies across root and serverless package.json",
      "matchFileNames": ["package.json", "serverless/package.json"],
      "matchDepNames": [
        "@aws-sdk/client-dynamodb",
        "@aws-sdk/util-dynamodb",
        "axios",
        "dotenv",
        "@types/aws-lambda",
        "@types/dotenv",
        "@types/node",
        "prettier",
        "serverless",
        "serverless-offline",
        "typescript"
      ],
      "groupName": "serverless template dependencies",
      "commitMessagePrefix": "[TEMPLATE-DEPS]",
      "automerge": false
    },
    {
      "description": "Serverless-only dependencies (not in root peerDeps)",
      "matchFileNames": ["serverless/package.json"],
      "excludeDepNames": [
        "@aws-sdk/client-dynamodb",
        "@aws-sdk/util-dynamodb",
        "axios",
        "dotenv",
        "@types/aws-lambda",
        "@types/dotenv",
        "@types/node",
        "prettier",
        "serverless",
        "serverless-offline",
        "typescript"
      ],
      "commitMessagePrefix": "[SERVERLESS-ONLY]",
      "automerge": false
    }
  ]
}
